<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Byul's Diary</title>

    <!-- Bootstrap core CSS -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="ie-emulation-modes-warning.js"></script>
    <script src="https://cdn.ckeditor.com/4.7.0/standard/ckeditor.js"></script>
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"
></script>
 <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>




    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="carousel.css" rel="stylesheet">
  </head>
<!-- NAVBAR
================================================== -->
   <body>
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Web programming project</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                
                </li>
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>


    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img class="first-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="First slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Example headline.</h1>
              <p>Note: If you're viewing this page via a <code>file://</code> URL, the "next" and "previous" Glyphicon buttons on the left and right might not load/display properly due to web browser security rules.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Sign up today</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="second-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Another example headline.</h1>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Learn more</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="third-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Third slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Browse gallery</a></p>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div><!-- /.carousel -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->
<div class = "search">
<input type="button" name="searchb" value="search">
<input type="text" name="hasgtag" placeholder="hasgtag">

</div>


<div class="diary-title">
<input type ="text" name="diary-title" placeholder="diary-title"></div>
<div class="diary-date">
<input type="date" name="date">
</div>
 <textarea class="diary-conent" name = "editorl" id="editorl"></textarea>

<div class="diary-tag">
<input type="text" name="diary-tag" placeholder="hasg tags"> 
</div>
<div class="form-group">
<input type="file" name="file" placeholder="첨부파일을 선택하세요." />
</div>
<input type="button" id="butt" value="upload">
 

    <div class="container marketing">

     

      <!-- START THE FEATURETTES -->

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 class="featurette-heading">Your diary <span class="text-muted">Let's see</span></h2>
          <p class="lead" id="test"></p>
        </div>
        <div class="col-md-5">

        </div>
      </div>


</div>

      <!-- /END THE FEATURETTES -->


      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; 2016 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->
<p class="dummy">Value:[[value]]</p>
 <script>

 class content{
  constructor(contents)
  {
     this._contents=contents;
    
  }

 }
 var editor= CKEDITOR.replace('editorl');
 window.onload =init;
 function init() {
  var button =document.getElementById("butt");
  button.onclick=handleButtonClick;
 }

 function handleButtonClick(){
    var title =document.getElementsByName("diary-title").item(0).value;
    var post= editor.getData();
    var tags = document.getElementsByName("diary-tag").item(0).value;
    var date = document.getElementsByName("date").item(0).value;
    var files = document.getElementsByName("file").item(0).value;
   var dd = {"Date" : date ,"Title" :title, "Content" :post, "HashTag" : tags, "File" : files };
    $.ajax({
      url : "https://byuls-diary.firebaseio.com/diary.json",
      method :"POST",
      data:JSON.stringify(dd),
      success:function(){
        alert("success!");
      }
    });
   };

   $(document).ready(function(){
    var wanteOrder = new Firebase('https://byuls-diary.firebaseio.com');
       var query= wanteOrder.child("diary").orderByChild('Date');
       query.on("child_added",function(snapshot){
       document.getElementById("test").innerHTML=printObj(snapshot.val());
   });
});
     
       /*
    $.ajax({
     url : "https://byuls-diary.firebaseio.com/diary.json",
      method :"GET",
      success : function(data){
        var wanteOrder = new Firebase('https://byuls-diary.firebaseio.com');
       var query= wanteOrder.child("diary").orderByChild('Date');
       query.on("value",function(snapshot){
  snapshot.forEach(function(child)
  {
     document.getElementById("test").innerHTML=child.val();
  })


       
        });
        
      }
    });
   });
*/
   function printObj(obj){
    var ret = "";
    if($.type(obj)=="string"){
      ret = obj;
    }
    else {
      for(var property in obj) {
        ret += property+" : "
        ret += printObj(obj[property])+"}" ;
      }
    }
    return ret;
    
   }

var search = "#"+ document.getElementsByName("hasgtag").item(0).value;
   new Firebase("https://byuls-diary.firebaseio.com/diary")
   .startAt(search)
   .endAt(search)
   .once('value',function(data){
    document.getElementById("test").innerHTML=(printObj(data));
  });
   
/*
 $(document).ready(function(){
  $(window).on("scroll",function() {
    var scrollHeight = $(window).scrollTop() +$(window).height();
    var documentHeight = $(document).height();

    if(scrollHeight == documentHeight) {
      appendP(10);
    }
  });
  appendP(30);
 });

 function appendP(num){
  for(var i=0 ; i<num; i++) {
    var dummy = $(".dummy");
    dummy.removeClass("dummy");

    var random = Math.floor((Math.random()*10)+1);
    dummy.html(dummy.html().replace("[[value]]",random));

    $("body").append(dummy);
  }
 }
 
 var $win =$(window).
 $doc=$(document);

 $win.scroll(function() {
  if($win.scrollTop()==$doc.height()=$win.height())
  {
     var dummy = $(".dummy");
    dummy.removeClass("dummy");

    var random = Math.floor((Math.random()*10)+1);
  }
 })*/
 </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
 
  </body>
</html>
